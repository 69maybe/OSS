name: Auto Deploy to Somee via SFTP

on:
  push:
    branches:
      - main  # Chạy khi push lên nhánh main

jobs:
  deploy:
    runs-on: ubuntu-latest

    steps:
    - name: Checkout repository
      uses: actions/checkout@v3

    - name: Deploy via SFTP
      uses: appleboy/scp-action@v0.1.4
      with:
        host: ${{ secrets.SFTP_HOST }}       # FTP/SFTP host Somee
        username: ${{ secrets.SFTP_USER }}   # Username SFTP
        password: ${{ secrets.SFTP_PASS }}   # Password SFTP
        port: ${{ secrets.SFTP_PORT }}       # Mặc định 22
        source: "./"                         # Thư mục HTML/CSS/JS
        target: "/wwwroot/"                   # Thư mục web trên Somee
        rm: true                              # Xóa file cũ trên host trước khi upload
