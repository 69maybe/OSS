name: Auto Deploy HTML/CSS/JS to Somee

on:
  push:
    branches:
      - main   # Chạy khi push lên nhánh main

jobs:
  deploy:
    runs-on: ubuntu-latest

    steps:
    - name: Checkout repository
      uses: actions/checkout@v3

    - name: Deploy via SFTP
      uses: appleboy/scp-action@v0.1.4
      with:
        host: ${{ secrets.SFTP_HOST }}       # Ví dụ: ftp.somee.com
        username: ${{ secrets.SFTP_USER }}   # Username SFTP
        password: ${{ secrets.SFTP_PASS }}   # Password SFTP
        port: ${{ secrets.SFTP_PORT }}       # 22 cho SFTP
        source: "./"                         # Upload toàn bộ repo
        target: "/wwwroot/"                  # Web root Somee
        rm: true                              # Xóa file cũ trước khi upload
        exclude: |
          .github/
          protected/
          .git/
